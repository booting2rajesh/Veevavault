<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veeva Quality Suite</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <style>
        
		 /* Basic reset and body styling */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
			font-family: 'Source Sans Pro', sans-serif;
        }

        body, .landing-search-box, .top-bar, .results-section, .result-item {
            font-family: 'Source Sans Pro', sans-serif;
            background-color: #fefefe;
        }

        /* Landing Page Centered Style */
        .landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        .landing-logo img {
            width: 200px;
        }

        .landing-search-box {
            display: flex;
            align-items: center;
            margin-top: 30px;
        }


.landing-search-box input[type="text"],
.landing-search-box select,
.landing-search-box button {
    margin: 0;
	height: 55px;
	
}


        .landing-search-box input[type="text"] {
            width: 500px;
            padding: 15px 20px;
            font-size: 1.2em;
            border: 1px solid #dfe1e5;
            border-radius: 24px 0 0 24px;
            outline: none;
        }
		
				
		
		/* Style the dropdown to match the search box style */
.landing-search-box select {
      padding: 15px;
	  width: 220px;
    font-size: 1.2em;
    border: 1px solid #dfe1e5;
    border-radius: 0;
    outline: none;
    background-color: #f8f9fa;
    margin-left: 1px;
    cursor: pointer;
}
		

        .landing-search-box button {
            padding: 15px 20px;
            border: 1px solid #dfe1e5;
            border-left: none;
            background-color: #f8f9fa;
            cursor: pointer;
            border-radius: 0 24px 24px 0;
            font-size: 1.2em;
            transition: background-color 0.3s;
        }

        .landing-search-box button:hover {
            background-color: #e0e0e0;
        }

        /* Search Results Page Layout */
        .search-results {
            display: none;
            padding: 20px;
        }

        .top-bar {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }

        .top-bar-logo img {
            width: 80px;
        }

        .top-bar-search-box {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }


.top-bar-search-box input[type="text"],
.top-bar-search-box select,
.top-bar-search-box button {
    margin: 0;
    height: 40px;
	
    
}


        .top-bar-search-box input[type="text"] {
            width: 450px;
            padding: 10px 20px;
            font-size: 1em;
            border: 1px solid #dfe1e5;
            border-radius: 24px 0 0 24px;
            outline: none;
        }
		
		
		.top-bar-search-box select {
      
	  padding: 9px 10px;
	  width: 190px;
    font-size: 1em;
    border: 1px solid #dfe1e5;
    border-radius: 0;
    outline: none;
    background-color: #f8f9fa;
    margin-left: 1px;
    cursor: pointer;
}

        .top-bar-search-box button {
            padding: 10px 20px;
            border: 1px solid #dfe1e5;
            border-left: none;
            background-color: #f8f9fa;
            cursor: pointer;
            border-radius: 0 24px 24px 0;
            font-size: 1em;
            transition: background-color 0.3s;
        }

      

        .results-section {
            margin-top: 20px;
            padding: 20px;
        }

        .results-section h3 {
            color: #555;
            font-size: 1.2em;
        }

        .result-item {
            margin-bottom: 20px;
            padding: 15px;
            border-bottom: 1px solid #dfe1e5;
			line-height: 29px;
			font-size: 20px;
        }

        .result-item h4 {
            color: #333;
            font-size: 1.1em;
        }

        .result-item p {
            color: #666;
            font-size: 0.9em;
        }

        /* Add styles for debugging */
        #jsonDisplay {
            width: 100%;
            height: 50px;
            margin-top: 20px;
            font-size: 12px;
            display: none; /* Hide initially */
        }

        
        /* Example styles for results container */
        #searchResultsContainer {
		
		max-height: 100%; /* Constrain to grid item height */
    overflow-y: auto; /* Enable scrolling for excess content */
    padding-right: 15px; /* Add padding to prevent content from hiding under scrollbar */
    box-sizing: border-box;
		
		
            margin: 15px; /* Adds some margin for spacing */
        }


#qdocsearchResultsContainer
 {
		
		max-height: 100%; /* Constrain to grid item height */
    overflow-y: auto; /* Enable scrolling for excess content */
    padding-right: 15px; /* Add padding to prevent content from hiding under scrollbar */
    box-sizing: border-box;
		
		
            margin: 15px; /* Adds some margin for spacing */
        }


 #objectResultsContainer {
		
		max-height: 100%; /* Constrain to grid item height */
    overflow-y: auto; /* Enable scrolling for excess content */
    padding-right: 15px; /* Add padding to prevent content from hiding under scrollbar */
    box-sizing: border-box;
		
		
            margin: 15px; /* Adds some margin for spacing */
        }



#qdocobjectResultsContainer {
		
		max-height: 100%; /* Constrain to grid item height */
    overflow-y: auto; /* Enable scrolling for excess content */
    padding-right: 15px; /* Add padding to prevent content from hiding under scrollbar */
    box-sizing: border-box;
		
		
            margin: 15px; /* Adds some margin for spacing */
        }


        #errorMessage {
            color: red;
            display: none;
            margin-top: 10px;
        }
		
			.loader {
    width: 40px;
    height: 40px;
    --c: no-repeat linear-gradient(white 0 0);
    background: var(--c), var(--c), var(--c), var(--c);
    background-size: 21px 21px;
    animation: l5 1.5s infinite cubic-bezier(0.3, 1, 0, 1);
    position: fixed;       /* Fix position to keep it centered */
    top: 50%;              /* Center vertically */
    left: 50%;             /* Center horizontally */
    transform: translate(-50%, -50%); /* Offset by half width and height to center */
    display: none; /* Hide by default */
    z-index: 1000; /* Ensure it appears on top of other elements */
}

.loader-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(255, 255, 255, 0.8); /* Optional background overlay */
    z-index: 1000;
}

        .show-loader {
            display: block; /* Show loader when class added */
        }

        @keyframes l5 {
            0% { background-position: 0 0, 100% 0, 100% 100%, 0 100% }
            33% { background-position: 0 0, 100% 0, 100% 100%, 0 100%; width:60px; height: 60px }
            66% { background-position: 100% 0, 100% 100%, 0 100%, 0 0; width:60px; height: 60px }
            100% { background-position: 100% 0, 100% 100%, 0 100%, 0 0 }
        }
		






/* Header styles for both object and document headers */

.all-objects-header, .all-documents-header {
    display: flex;
    align-items: center;
    
	margin-left: 10px;
    padding: 10px;
    background-color: #FF6F61;
    color: #fff;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    margin-bottom: 5px;
	width: calc(100% - 20px); /* Match container width minus margin */
    box-sizing: border-box; 
}

.all-objects-header .expand-button, .all-documents-header .expand-button {
    font-size: 1.5rem;
    margin-left: 15px;
    transition: transform 0.3s ease;
	transform: scale(1.35);
	
	
}

.all-objects-header .expand-button.expanded, .all-documents-header .expand-button.expanded {
    
	transform: rotate(90deg); /* Flips icon when expanded */
	
}

.object-count, .document-count  {
    margin-left: 10px; /* Space between the text and the count */
}




/* General container styles for results */
.object-results-container,
.document-results-container {
    padding: 10px;
    background-color: #e6e1e1;
    border-radius: 5px;
    margin-top: 5px;
    display: none; /* Initially hidden */
    max-height: 150px;
    overflow-y: auto;
	
	
	
	width: calc(100% - 20px); /* Match header width */
    box-sizing: border-box;
    margin-left: 10px; /* Aligns left with headers */
	
	
}








.grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 2px;
    height: 100vh;
    padding: 8px;
}

.grid-item {
    border: 1px solid #dfe1e5;
    border-radius: 8px;
    padding: 5px;
    overflow: auto;
    position: relative;
	text-align:center;
	font-size:22px;
	font-weight: 700;
	color:#454343;
}

/* Colors for individual quadrants */
#resultsQuadrant {
    background-color: #f78f72;
}

#quadrant2 {
    background-color: #8eb4fa;
}

#quadrant3 {
    background-color: #fce956;
}

#quadrant4 {
    background-color: #86f7a4;
}



		
    </style>
</head>
<body>

 <div class="loader"></div>               
 
 <div id="content">
    <!-- Landing Page -->
    <div class="landing-page" id="landingPage">
        <div class="landing-logo">
            <img src="vault.png" alt="Logo">
        </div>
        <div class="landing-search-box">
            <input type="text" id="landingSearchInput" placeholder="Search...">
						
    
           
			 <button onclick="startSearch()">Search</button>
			
        </div>
    </div>

    <!-- Search Results Page -->
    <div class="search-results" id="searchResultsPage">
        <div class="top-bar">
           
		   <div class="top-bar-logo">                      
                <img src="vault.png" alt="Logo">           
            </div>                                         
			
			
            <div class="top-bar-search-box">
                <input type="text" id="topSearchInput" placeholder="Search...">
                
				
				
				
				<button id="searchButton" onclick="handleSearch()">Search</button>
            </div>
        </div>
		

<div class="grid-container">

    <!-- Quadrant 1: Results Section -->
	
    <div class="grid-item" id="resultsQuadrant"> QMS
        <div id="searchResultsContainer"></div> 
		<div id="objectResultsContainer"></div>

    </div>

    
    <div class="grid-item" id="quadrant2"> QDOCS

		<div id="qdocsearchResultsContainer"></div>
		<div id="qdocobjectResultsContainer"></div>
	</div>
    <div class="grid-item" id="quadrant3"> CTMS </div>
    <div class="grid-item" id="quadrant4"> eTMF </div>
</div>





<script>

let metadataData = null;          // Stores fetched metadata globally
let objectResults = [];          // Stores fetched object results
let qdocObjectResults = [];     // To Stores fetched Qdoc object results
let searchTerm = '';

// Array of objects and their corresponding queries to search
const objectQueries = {
    'audit__qdm': "select id, name__v FROM audit__qdm FIND('{searchTerm}')",
    'audit_program__v': "select id, name__v FROM audit_program__v FIND('{searchTerm}')",
    'capa_action__qdm': "select id, name__v FROM capa_action__qdm FIND('{searchTerm}')",
    'change_action__qdm': "select id, name__v FROM change_action__qdm FIND('{searchTerm}')",
    'effectiveness_check__qdm': "select id, name__v FROM effectiveness_check__qdm FIND('{searchTerm}')",
    'investigation__qdm': "select id, name__v FROM investigation__qdm FIND('{searchTerm}')",
    'extension_request__qdm': "select id, name__v FROM extension_request__qdm FIND('{searchTerm}')",
    'issue_escalation__v': "select id, name__v FROM issue_escalation__v FIND('{searchTerm}')",
    'qms_organization__qdm': "select id, name__v FROM qms_organization__qdm FIND('{searchTerm}')",
    'qms_org_qualification__v': "select id, name__v FROM qms_org_qualification__v FIND('{searchTerm}')",
    'qms_scar__v': "select id, name__v FROM qms_scar__v FIND('{searchTerm}')",
    'quality_event__qdm': "select id, name__v,title__v,description__c,justification__qdm,comments__v,severity__qdm,ae_severity__v, object_type__vr.name__v FROM quality_event__qdm FIND('{searchTerm}')"
};

// QDOCS objects

const qdocsObjectQueries = {
    'document_change_control__v': "select id, name__v FROM document_change_control__v FIND('{searchTerm}')",
    'document_change_request__v': "select id, name__v FROM document_change_request__v FIND('{searchTerm}')",
    'periodic_review__v': "select id, name__v FROM periodic_review__v FIND('{searchTerm}')",
	'controlled_copy_trace__v': "select id, name__v FROM controlled_copy_trace__v FIND('{searchTerm}')"
}

// Show loader
function showLoader() {
    document.querySelector('.loader').classList.add('show-loader');
}

// Hide loader
function hideLoader() {
    document.querySelector('.loader').classList.remove('show-loader');
}

// Initialize the search from landing or top search bar
function startSearch() {
    const searchInput = document.getElementById('landingSearchInput').value;
    if (searchInput.trim() === '') {
        alert('Please enter a search term');
        return;
    }

    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('searchResultsPage').style.display = 'block';
    document.getElementById('topSearchInput').value = searchInput;

    handleSearch();
}

// Add enter key event listener
function addEnterKeyListener(inputElement, callback) {
    inputElement.addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            if (inputElement.value.trim() !== '') {
                callback();
            } else {
                alert('Please enter a search term');
            }
        }
    });
}

// Add listeners for the landing and top search inputs
addEnterKeyListener(document.getElementById('landingSearchInput'), startSearch);
addEnterKeyListener(document.getElementById('topSearchInput'), handleSearch);

async function handleSearch() {
    searchTerm = document.getElementById('topSearchInput').value;
    if (searchTerm.trim() === '') {
        alert('Please enter a search term');
        return;
    }
    showLoader();
    await fetchMetadata(searchTerm);
}

async function fetchMetadata(searchTerm) {
    const username = 'prana.user4@partnersi-prana4life.com';
    const password = 'Pr@na4@2025!'; // Ensure secure handling in production

    const formData = new URLSearchParams();
    formData.append('username', username);
    formData.append('password', password);

    try {
        const authResponse = await fetch(getVaultApiUrl('auth'), {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-Requested-With': 'XMLHttpRequest'
            },
            body: formData
        });

        if (!authResponse.ok) {
            throw new Error(`Authentication failed: ${authResponse.status}`);
        }

        const authData = await authResponse.json();
        const sessionId = authData.sessionId;

        if (!sessionId) {
            throw new Error('Failed to obtain session ID.');
        }

        await fetchDocuments(searchTerm, sessionId);
        await fetchObjects(searchTerm, sessionId);

        displayFilteredResults(metadataData);
        displayObjectResults(objectResults);

    } catch (error) {
        console.error('Error during fetch:', error);
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('errorMessage').textContent = `Error fetching metadata: ${error.message}`;
    } finally {
        hideLoader();
    }
}

async function fetchDocuments(searchTerm, sessionId) {
    let offset = 0;
    const limit = 1000;
    let hasMoreResults = true;
    metadataData = { data: [] };

    while (hasMoreResults) {
        const query = buildQuery(searchTerm, limit, offset);
        const searchResponse = await fetchWithRetry(getVaultApiUrl(`query?q=${query}`), {
            headers: {
                'Authorization': sessionId,
                'X-Requested-With': 'XMLHttpRequest'
            }
        });

        const data = searchResponse;
        if (data.data && data.data.length > 0) {
            metadataData.data.push(...data.data);
            offset += limit;
        } else {
            hasMoreResults = false;
        }
    }
}

async function fetchObjects(searchTerm, sessionId) {
    objectResults = [];

    for (const [objectType, queryTemplate] of Object.entries(objectQueries)) {
	
        const query = queryTemplate.replace(/{searchTerm}/g, searchTerm);

        try {
            const searchResponse = await fetchWithRetry(getVaultApiUrl(`query?q=${query}`), {
                headers: {
                    'Authorization': sessionId,
                    'X-Requested-With': 'XMLHttpRequest'
                }
            });

            console.log(`Response for ${objectType}:`, searchResponse);
            objectResults.push({
                objectType: objectType,
                results: searchResponse.data || []
            });
        } catch (error) {
            console.error(`Object search failed for ${objectType}: ${error.message}`);
        }
    }
	
	// Fetch QDOCS Objects with searchTerm
	
	 qdocobjectResults = [];

    for (const [objectType, queryTemplate] of Object.entries(qdocsObjectQueries)) {
	
        const query = queryTemplate.replace(/{searchTerm}/g, searchTerm);

        try {
            const searchResponse = await fetchWithRetry(getVaultApiUrl(`query?q=${query}`), {
                headers: {
                    'Authorization': sessionId,
                    'X-Requested-With': 'XMLHttpRequest'
                }
            });

            console.log(`Response for ${objectType}:`, searchResponse);
            qdocobjectResults.push({
                objectType: objectType,
                qdocresults: searchResponse.data || []
            });
        } catch (error) {
            console.error(`Object search failed for ${objectType}: ${error.message}`);
        }
    }
}

// Utility function for fetch with retry
async function fetchWithRetry(url, options, retries = 3) {
    for (let i = 0; i < retries; i++) {
        try {
            const response = await fetch(url, options);
            if (response.ok) return await response.json();
            console.error(`Attempt ${i + 1} failed with status: ${response.status}`);
        } catch (error) {
            console.error(`Attempt ${i + 1} failed with error: ${error.message}`);
        }
    }
    throw new Error(`Failed to fetch after ${retries} attempts`);
}

// Utility to build API URL
function getVaultApiUrl(endpoint) {
    const baseUrl = 'https://cors-anywhere.herokuapp.com/https://partnersi-prana4life-quality.veevavault.com/api/v24.2/';
    return new URL(endpoint, baseUrl).toString();
}

// Build document query
function buildQuery(searchTerm, limit, offset) {
    return `select id, name__v, filename__v, document_number__v, lifecycle__v, type__v, subtype__v, classification__v FROM ALLVERSIONS documents FIND('${searchTerm}' SCOPE ALL) LIMIT ${limit} OFFSET ${offset}`;
}



// Display document search results
function displayFilteredResults(metadataData) {
    const resultsContainer = document.getElementById('searchResultsContainer');
    const qdocresultsContainer = document.getElementById('qdocsearchResultsContainer');
	
	qdocresultsContainer.innerHTML = ''; // Clear previous content
    resultsContainer.innerHTML = ''; // Clear previous content

    const results = metadataData.data || [];
    const documentCount = results.length;

    // Create a header similar to `displayObjectResults`
    const documentHeader = document.createElement('div');
    documentHeader.classList.add('all-documents-header');
    documentHeader.innerHTML = `
        <span>Total documents matching the search keyword:</span>
        <div class="document-count">${documentCount}</div>
        <div class="expand-button" onclick="toggleVisibility('documentList', this)">&#8250;</div>
    `;
	// Create a header similar to `displayQDocsObjectResults`
    const qdocumentHeader = document.createElement('div');
    qdocumentHeader.classList.add('all-documents-header');
    qdocumentHeader.innerHTML = `
        <span>Total documents matching the search keyword:</span>
        <div class="document-count">${documentCount}</div>
        <div class="expand-button" onclick="toggleVisibility('qdocumentList', this)">&#8250;</div>
    `;
	qdocresultsContainer.appendChild(qdocumentHeader);
	
  //  resultsContainer.appendChild(documentHeader);

    // Create a container for the document list
    const documentList = document.createElement('div');
    documentList.classList.add('document-results-container'); // Consistent styling
    documentList.setAttribute('id', 'documentList');
    documentList.style.display = 'none'; // Initially hidden
	
    // Create a container for the document list
    const qdocumentList = document.createElement('div');
    qdocumentList.classList.add('document-results-container'); // Consistent styling
    qdocumentList.setAttribute('id', 'qdocumentList');
    qdocumentList.style.display = 'none'; // Initially hidden

    if (documentCount > 0) {
        results.forEach(result => {
            const documentLink = document.createElement('a');
            documentLink.href = `https://partnersi-prana4life-quality.veevavault.com/ui/#doc_info/${result.id}/1/0`;
            documentLink.target = '_blank';
            documentLink.textContent = result.name__v;
            documentList.appendChild(documentLink);
            documentList.appendChild(document.createElement('br'));
        });
    } else {
        documentList.innerHTML = '<p>No document results found.</p>';
    }
	
    if (documentCount > 0) {
        results.forEach(result => {
            const qdocumentLink = document.createElement('a');
            qdocumentLink.href = `https://partnersi-prana4life-quality.veevavault.com/ui/#doc_info/${result.id}/1/0`;
            qdocumentLink.target = '_blank';
            qdocumentLink.textContent = result.name__v;
            qdocumentList.appendChild(qdocumentLink);
            qdocumentList.appendChild(document.createElement('br'));
        });
    } else {
        qdocumentList.innerHTML = '<p>No document results found.</p>';
    }
	qdocresultsContainer.appendChild(qdocumentList);
	
    //resultsContainer.appendChild(documentList);
}


// Display object search results
function displayObjectResults() {

    const objectContainer = document.getElementById('objectResultsContainer'); 
    objectContainer.innerHTML = ''; // Clear previous content
	
    const qdocobjectContainer = document.getElementById('qdocobjectResultsContainer'); 
    qdocobjectContainer.innerHTML = ''; // Clear previous content

    const totalObjectCount = objectResults.reduce((sum, { results }) => sum + results.length, 0);
	//QDOC
	const totalQdocObjectCount = qdocobjectResults.reduce((sum, { qdocresults }) => sum + qdocresults.length, 0);

    // Create a header similar to the one in `displayFilteredResults`
    const allObjectsHeader = document.createElement('div');
    allObjectsHeader.classList.add('all-objects-header');
    allObjectsHeader.innerHTML = `
        <span>Total objects matching the search keyword:</span>
        <div class="object-count">${totalObjectCount}</div>
        <div class="expand-button" onclick="toggleVisibility('allObjectsList', this)">&#8250;</div>
    `;
	// QDOCS
	// Create a header similar to the one in `displayFilteredResults`
    const qallObjectsHeader = document.createElement('div');
    qallObjectsHeader.classList.add('all-objects-header');
    qallObjectsHeader.innerHTML = `
        <span>Total objects matching the search keyword:</span>
        <div class="object-count">${totalQdocObjectCount}</div>
        <div class="expand-button" onclick="toggleVisibility('qallObjectsList', this)">&#8250;</div>
    `;
    
	qdocobjectContainer.appendChild(qallObjectsHeader);
	objectContainer.appendChild(allObjectsHeader);
	
    const allObjectsList = document.createElement('div');
    allObjectsList.classList.add('object-results-container');
    allObjectsList.setAttribute('id', 'allObjectsList');
    allObjectsList.style.display = 'none'; // Initially hidden
	
	//QDOCS
	const qallObjectsList = document.createElement('div');
    qallObjectsList.classList.add('object-results-container');
    qallObjectsList.setAttribute('id', 'qallObjectsList');
    qallObjectsList.style.display = 'none'; // Initially hidden

    if (totalObjectCount > 0) {
        objectResults.forEach(({ objectType, results }) => {
            if (results.length > 0) {
                const objectTypeHeader = document.createElement('div');
                objectTypeHeader.classList.add('object-type-header');
                objectTypeHeader.innerHTML = `<strong>${objectType}</strong>`;
                allObjectsList.appendChild(objectTypeHeader);

                results.forEach(result => {
                    const objectLink = document.createElement('a');
                    objectLink.href = `https://cors-anywhere.herokuapp.com/https://partnersi-prana4life-quality.veevavault.com/ui/#obj_common/${objectType}/${result.id}`;
                    objectLink.target = '_blank';
                    objectLink.textContent = result.name__v || 'Unnamed Object';
                    allObjectsList.appendChild(objectLink);
                    allObjectsList.appendChild(document.createElement('br'));
                });
            }
        });
    } else {
        allObjectsList.innerHTML = '<p>No object results found.</p>';
    }
	
	// QDOCS 
	if (totalQdocObjectCount > 0) {
        qdocobjectResults.forEach(({ objectType, qdocresults }) => {
            if (qdocresults.length > 0) {
                const qobjectTypeHeader = document.createElement('div');
                qobjectTypeHeader.classList.add('object-type-header');
                qobjectTypeHeader.innerHTML = `<strong>${objectType}</strong>`;
                qallObjectsList.appendChild(qobjectTypeHeader);

                qdocresults.forEach(result => {
                    const qobjectLink = document.createElement('a');
                    qobjectLink.href = `https://cors-anywhere.herokuapp.com/https://partnersi-prana4life-quality.veevavault.com/ui/#obj_common/${objectType}/${result.id}`;
                    qobjectLink.target = '_blank';
                    qobjectLink.textContent = result.name__v || 'Unnamed Object';
                    qallObjectsList.appendChild(qobjectLink);
                    qallObjectsList.appendChild(document.createElement('br'));
                });
            }
        });
    } else {
        qallObjectsList.innerHTML = '<p>No object results found.</p>';
    }

    
	qdocobjectContainer.appendChild(qallObjectsList);
	
	objectContainer.appendChild(allObjectsList);
}

// Toggle visibility of document or object lists
function toggleVisibility(listId, expandButton) {
    const list = document.getElementById(listId);

    if (list.style.display === 'none') {
        list.style.display = 'block';
        expandButton.classList.add('expanded');
    } else {
        list.style.display = 'none';
        expandButton.classList.remove('expanded');
    }
}


</script>
 
</body>
</html>
